#!/usr/bin/env python3
"""
EdgeTPUæµæ°´çº¿åŸç†å›¾ - çº¯æ–‡æœ¬ç‰ˆæœ¬
å±•ç¤ºEdgeTPUå¦‚ä½•åœ¨OUTä¼ è¾“æœŸé—´åŒæ—¶è¿›è¡ŒINä¼ è¾“
"""

def print_pipeline_diagram():
    print("=" * 80)
    print("ğŸ” EdgeTPU å…¨åŒå·¥æµæ°´çº¿æ¶æ„æ­ç§˜")
    print("=" * 80)
    print()
    
    print("ğŸ“Œ é—®é¢˜æ ¸å¿ƒ: ä¸ºä»€ä¹ˆget_tensor()è¿™ä¹ˆå¿«ï¼Ÿä¸ºä»€ä¹ˆæµ‹é‡æ˜¾ç¤º0.00msï¼Ÿ")
    print()
    
    # === ä¼ ç»Ÿé”™è¯¯ç†è§£ ===
    print("âŒ ã€ä¼ ç»Ÿé”™è¯¯ç†è§£ - ä¸²è¡Œæ¨¡å¼ã€‘")
    print("   invoke1: OUT[740KB] â”€â”€â†’ IN[135KB] â”€â”€â”€â”€â”€â†’ (22ms)")
    print("   invoke2: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ OUT[740KB] â”€â”€â†’ IN[135KB] â”€â†’ (12.6ms)")
    print("   invoke3: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ OUT[740KB] â”€â”€â†’ IN[135KB] (12.6ms)")
    print("   ")
    print("   ğŸ“ è¿™ç§ç†è§£è®¤ä¸º: OUTå®Œæˆåæ‰å¼€å§‹INä¼ è¾“")
    print("   âŒ é—®é¢˜: æ— æ³•è§£é‡Šget_tensor()çš„æå¿«é€Ÿåº¦")
    print()
    
    # === EdgeTPUå®é™…æ¶æ„ ===
    print("âœ… ã€EdgeTPUå®é™…æ¶æ„ - å…¨åŒå·¥æµæ°´çº¿ã€‘")
    print()
    print("   æ—¶é—´è½´:  0ms     5ms     10ms    15ms    20ms    25ms")
    print("   â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â†’")
    print()
    
    print("   invoke1: â”œâ”€OUT1â”€â”¤                              (22mså†·å¯åŠ¨)")
    print("           â”‚740KB â”‚ (æ— IN - è¿™æ˜¯å…³é”®è¯æ®!)")
    print("           â”‚      â”‚")
    print()
    
    print("   invoke2:         â”œâ”€OUT2â”€â”¤                      (12.6ms)")
    print("                   â”‚740KB â”‚")
    print("                   â”œâ”€IN1â”€â”€â”¤  â† åŒæ—¶è¿›è¡Œ!")
    print("                   â”‚135KB â”‚  (invoke1çš„ç»“æœ)")
    print()
    
    print("   invoke3:                 â”œâ”€OUT3â”€â”¤              (12.6ms)")
    print("                           â”‚740KB â”‚")
    print("                           â”œâ”€IN2â”€â”€â”¤  â† åŒæ—¶è¿›è¡Œ!")
    print("                           â”‚135KB â”‚  (invoke2çš„ç»“æœ)")
    print()
    
    print("   ğŸ”‘ å…³é”®å‘ç°:")
    print("   â€¢ invoke1: åªæœ‰OUTï¼Œæ— INä¼ è¾“ (å†·å¯åŠ¨éªŒè¯)")
    print("   â€¢ invoke2+: INä¼ è¾“100%åœ¨OUTæœŸé—´å‘ç”Ÿ")
    print("   â€¢ çœŸæ­£çš„å…¨åŒå·¥USBé€šä¿¡ï¼")
    print()
    
    # === USBç›‘æ§æ•°æ®éªŒè¯ ===
    print("ğŸ”¬ ã€USBç›‘æ§æ•°æ®éªŒè¯ã€‘")
    print()
    print("   å®é™…æµ‹é‡ç»“æœ:")
    print("   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
    print("   â”‚ invoke1: åªæœ‰16B IN (æ§åˆ¶ä¿¡å·)                     â”‚")
    print("   â”‚ invoke2: 134.8KB INï¼Œ100%åœ¨OUTæœŸé—´                 â”‚") 
    print("   â”‚ invoke3: 134.8KB INï¼Œ100%åœ¨OUTæœŸé—´                 â”‚")
    print("   â”‚ invoke4: 134.8KB INï¼Œ100%åœ¨OUTæœŸé—´                 â”‚")
    print("   â”‚ ...æ‰€æœ‰åç»­invokeéƒ½æ˜¯ç›¸åŒæ¨¡å¼                     â”‚")
    print("   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
    print()
    
    # === æ€§èƒ½å½±å“åˆ†æ ===
    print("âš¡ ã€æ€§èƒ½å½±å“åˆ†æã€‘")
    print()
    print("   1. invoke()æµ‹é‡åŒ…å«ä»€ä¹ˆï¼Ÿ")
    print("      â”œâ”€ å‘é€å½“å‰invokeçš„æƒé‡ (740KB OUT)")
    print("      â”œâ”€ æ¥æ”¶å‰ä¸€ä¸ªinvokeçš„ç»“æœ (135KB IN) â† å¹¶è¡Œ!")
    print("      â””â”€ EdgeTPUå†…éƒ¨è®¡ç®—æ—¶é—´")
    print()
    
    print("   2. get_tensor()ä¸ºä»€ä¹ˆå¿«ï¼Ÿ")
    print("      â”œâ”€ æ•°æ®å·²ç»åœ¨invoke()æœŸé—´ä¼ è¾“åˆ°Hostå†…å­˜")
    print("      â”œâ”€ get_tensor()åªæ˜¯ä»å†…å­˜è¯»å–")
    print("      â””â”€ æ‰€ä»¥æµ‹é‡æ˜¾ç¤º~0.00ms")
    print()
    
    print("   3. çœŸå®æ€§èƒ½ç“¶é¢ˆåœ¨å“ªï¼Ÿ")
    print("      â”œâ”€ USBä¼ è¾“: 740KB OUT + 135KB IN")
    print("      â”œâ”€ EdgeTPUè®¡ç®—: ä¸ä¼ è¾“å¹¶è¡Œ")
    print("      â””â”€ ç“¶é¢ˆæ˜¯USBå¸¦å®½ï¼Œéè®¡ç®—èƒ½åŠ›!")
    print()
    
    # === æ¶æ„ä¼˜åŠ¿ ===
    print("ğŸš€ ã€æ¶æ„ä¼˜åŠ¿ã€‘")
    print()
    print("   âœ… å…¨åŒå·¥åˆ©ç”¨: OUTå’ŒINåŒæ—¶è¿›è¡Œ")
    print("   âœ… æµæ°´çº¿ä¼˜åŒ–: N+1çš„ç»“æœåœ¨ç¬¬Næ¬¡invokeæœŸé—´ä¼ è¾“")
    print("   âœ… å¸¦å®½æœ€å¤§åŒ–: USB 2.0 480Mbpså……åˆ†åˆ©ç”¨")
    print("   âœ… å»¶è¿Ÿéšè—: è®¡ç®—å’Œä¼ è¾“overlap")
    print()
    
    # === æµ‹é‡æ–¹æ³•å¯ç¤º ===
    print("ğŸ“Š ã€æµ‹é‡æ–¹æ³•å¯ç¤ºã€‘")
    print()
    print("   é”™è¯¯æ–¹æ³•: å•ç‹¬æµ‹é‡invoke() + get_tensor()")
    print("   â”œâ”€ invoke(): åŒ…å«å‰ä¸€ä¸ªç»“æœçš„ä¼ è¾“æ—¶é—´")
    print("   â”œâ”€ get_tensor(): åªæ˜¯å†…å­˜è®¿é—®ï¼Œæ¥è¿‘0ms")
    print("   â””â”€ æ€»æ—¶é—´: çœ‹ä¼¼å¾ˆå¿«ï¼Œå®é™…åŒ…å«äº†æµæ°´çº¿æ•ˆåº”")
    print()
    
    print("   æ­£ç¡®æ–¹æ³•: ç«¯åˆ°ç«¯å»¶è¿Ÿæµ‹é‡")
    print("   â”œâ”€ ä»è¾“å…¥å‡†å¤‡åˆ°æœ€ç»ˆç»“æœå¯ç”¨çš„å®Œæ•´æ—¶é—´")
    print("   â”œâ”€ è€ƒè™‘æµæ°´çº¿çš„é¢„çƒ­æ•ˆåº”(ç¬¬ä¸€æ¬¡invoke)")
    print("   â””â”€ åˆ†æç¨³æ€æ€§èƒ½(åç»­invoke)")
    print()
    
    print("=" * 80)
    print("ğŸ¯ ç»“è®º: EdgeTPUé€šè¿‡ç²¾å¦™çš„å…¨åŒå·¥æµæ°´çº¿æ¶æ„å®ç°é«˜æ€§èƒ½")
    print("    get_tensor()å¿«æ˜¯å› ä¸ºæ•°æ®å·²ç»æå‰ä¼ è¾“å®Œæˆï¼")
    print("=" * 80)

if __name__ == "__main__":
    print_pipeline_diagram()
